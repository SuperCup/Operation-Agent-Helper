# 使用说明

## 一、环境配置

### 1.1 安装依赖

```bash
npm install
```

### 1.2 配置环境变量

复制 `.env.example` 文件为 `.env.local`：

```bash
cp .env.example .env.local
```

编辑 `.env.local` 文件，配置以下变量：

```env
# DeepSeek API配置
# 获取方式：https://platform.deepseek.com/api_keys
VITE_DEEPSEEK_API_KEY=sk-your-api-key-here

# DeepSeek API基础URL（可选，默认：https://api.deepseek.com）
VITE_DEEPSEEK_API_BASE_URL=https://api.deepseek.com

# 是否使用代理（生产环境推荐使用代理保护API密钥）
# true: 使用代理，需要在Vercel/Netlify等平台配置代理函数
# false: 直接调用DeepSeek API（开发环境）
VITE_USE_API_PROXY=false

# 代理服务基础URL（如果使用代理）
# 例如：https://your-app.vercel.app
VITE_PROXY_BASE_URL=
```

### 1.3 启动开发服务器

```bash
npm run dev
```

访问 http://localhost:5173 查看应用。

---

## 二、功能使用

### 2.1 首次使用

1. **配置API密钥**
   - 在 `.env.local` 文件中配置 `VITE_DEEPSEEK_API_KEY`
   - 如果没有配置，系统会使用模拟模式（功能受限）

2. **开始对话**
   - 进入工作台页面
   - 系统会显示欢迎语
   - 在对话框中描述您的需求

### 2.2 意图识别

- **需求清晰**：系统会自动识别意图并推荐Agent
- **需求模糊**：系统会显示能力卡片，供您选择

### 2.3 信息收集

- 选择能力后，系统会弹出信息收集表单
- 填写必要信息（项目名称、品牌、平台等）
- 上传参考文件（历史方案、素材等）
- 点击"确认并开始生成"

### 2.4 工作流执行

- 系统会自动创建工作流并开始执行
- 在对话框中实时查看执行进度
- 可以展开步骤查看详细日志和Agent思考过程
- 需要人工确认的步骤会暂停等待

### 2.5 文档生成

- 任务完成后，右侧快捷功能栏会启用
- 点击"生成PPT"、"生成Excel"或"生成Doc"
- 系统会自动生成对应格式的文档
- 文档会自动下载到本地

### 2.6 文件管理

- 上传的文件存储在浏览器IndexedDB中
- 支持预览图片和PDF文件
- 文件会与会话关联，便于管理

---

## 三、注意事项

### 3.1 API密钥安全

- ⚠️ **不要将 `.env.local` 文件提交到Git仓库**
- ✅ 生产环境建议使用代理保护API密钥
- ✅ 使用环境变量管理密钥

### 3.2 存储限制

- IndexedDB存储限制：约5-10GB（取决于浏览器）
- 系统会自动清理30天前的旧文件
- 大文件建议压缩后上传

### 3.3 浏览器兼容性

- 需要现代浏览器支持（Chrome、Firefox、Edge、Safari最新版本）
- 需要支持IndexedDB、File API、Web Worker

### 3.4 性能优化

- 大文件处理可能较慢，请耐心等待
- 复杂工作流执行时间较长，请勿关闭页面
- 建议在稳定的网络环境下使用

---

## 四、故障排除

### 4.1 API调用失败

**问题**：提示"API调用失败"  
**解决**：
1. 检查DeepSeek API密钥是否正确配置
2. 检查网络连接
3. 检查API额度是否充足
4. 检查API基础URL是否正确（默认：https://api.deepseek.com）
5. 系统会自动降级到模拟模式

### 4.2 文件上传失败

**问题**：文件上传失败  
**解决**：
1. 检查文件大小（建议小于100MB）
2. 检查浏览器存储空间
3. 清除浏览器缓存后重试

### 4.3 工作流执行中断

**问题**：工作流执行中断  
**解决**：
1. 刷新页面，系统会自动恢复执行状态
2. 检查网络连接
3. 查看错误日志

---

## 五、开发说明

### 5.1 项目结构

```
src/
├── services/          # 服务层
│   ├── agentService.ts        # Agent API调用
│   ├── fileService.ts         # 文件管理
│   ├── documentService.ts     # 文档生成
│   └── workflowEngine.ts      # 工作流引擎
├── components/        # 组件
│   ├── EnhancedAIChatBox.tsx  # 对话组件
│   ├── QuickActionsBar.tsx    # 快捷功能栏
│   ├── InfoCollectionModal.tsx # 信息收集
│   └── ...
├── pages/             # 页面
├── store/             # 状态管理
└── types/             # 类型定义
```

### 5.2 扩展开发

- **添加新的Agent**：在 `src/data/agentData.ts` 中添加配置
- **添加新的工作流模板**：在 `src/data/agentData.ts` 中添加模板
- **自定义文档模板**：修改 `src/services/documentService.ts`

---

**文档版本**：v1.0  
**创建日期**：2026-01-28
